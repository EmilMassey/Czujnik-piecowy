<html>
	<head>
		<meta charset="utf-8">
		<title>Czujnik piecowy</title>

		<style>
			body {
				text-align: center;
				font-size: 80px;
				font-family: sans-serif;
			}
			@media(max-width: 767px) {
				body {
					font-size: 24px;
				}
			}
		</style>
	</head>
	<body>
		<p><strong>Temp: </strong><span id="temp"></span> &deg;C</p>
		<p><strong>Światło: </strong><span id="light"></span></p>

		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script>
			function pobierzDane() {
				$.ajax({
					url: 'https://api.thingspeak.com/channels/44390/feed.json?key=2FOE9W6A3QT94VCR',
					method: 'GET',
					dataType: 'json',
					success: function(data) {
						var current = data.feeds[data.feeds.length-1];

						var temp = current.field1;
						$('#temp').text(temp);

						var light = current.field2;
						if(light >= 600)
							$('#light').text('Włączone').css('color', 'green');
						else
							$('#light').text('Wyłączone').css('color', 'blue');
					},
					error: function() {
						console.log('Błąd');
					}
				});
			}

			$(document).ready(function() {
				pobierzDane();
				setInterval(pobierzDane, 60000);
			});
		</script>
	</body>
</html>